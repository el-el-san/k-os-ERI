# ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆåˆ†æãƒ¬ãƒãƒ¼ãƒˆ - æ©Ÿå¯†ãƒ‡ãƒ¼ã‚¿ã‚’å«ã‚€ãƒ¬ãƒãƒ¼ãƒˆ

- id: private-analytics-report
  category: 8
  category_name: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆ
  title: æ©Ÿå¯†åˆ†æãƒ¬ãƒãƒ¼ãƒˆ
  private: true
  required_roles: ["admin", "analyst"]
  content: |
    çµŒå–¶å±¤ãƒ»åˆ†æãƒãƒ¼ãƒ é™å®šã®è©³ç´°ãªåˆ†æãƒ¬ãƒãƒ¼ãƒˆã€‚å£²ä¸Šãƒ‡ãƒ¼ã‚¿ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼è¡Œå‹•åˆ†æã€ç«¶åˆåˆ†æãªã©ã‚’å«ã¿ã¾ã™ã€‚
  
  custom_html: |
    <style>
      .private-report {
        background: var(--card);
        border: 2px solid #9775fa;
        border-radius: 12px;
        padding: 24px;
        margin: 20px 0;
        position: relative;
        overflow: hidden;
      }
      
      .private-report::before {
        content: 'SAMPLE';
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotate(-30deg);
        font-size: 10rem;
        font-weight: bold;
        color: var(--text);
        opacity: 0.5;
        pointer-events: none;
        z-index: 9999;
        white-space: nowrap;
      }
      
      .report-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 30px;
        padding-bottom: 20px;
        border-bottom: 1px solid var(--border);
      }
      
      .report-title {
        font-size: 1.8rem;
        font-weight: 700;
        color: var(--text);
      }
      
      .confidential-label {
        background: #9775fa;
        color: white;
        padding: 6px 16px;
        border-radius: 20px;
        font-size: 0.85rem;
        font-weight: bold;
        display: flex;
        align-items: center;
        gap: 8px;
      }
      
      .report-metrics {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }
      
      .metric-box {
        background: var(--sidebar-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px;
      }
      
      .metric-label {
        font-size: 0.85rem;
        color: var(--text-weak);
        margin-bottom: 8px;
      }
      
      .metric-value {
        font-size: 2rem;
        font-weight: 700;
        color: var(--text);
        margin-bottom: 4px;
      }
      
      .metric-change {
        font-size: 0.9rem;
        font-weight: 600;
      }
      
      .metric-change.positive {
        color: #10b981;
      }
      
      .metric-change.negative {
        color: #ef4444;
      }
      
      .chart-container {
        background: var(--sidebar-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        padding: 20px;
        margin-bottom: 20px;
        height: 300px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-weak);
      }
      
      .data-table {
        width: 100%;
        background: var(--sidebar-bg);
        border: 1px solid var(--border);
        border-radius: 8px;
        overflow: hidden;
      }
      
      .data-table th,
      .data-table td {
        padding: 12px;
        text-align: left;
        border-bottom: 1px solid var(--border);
      }
      
      .data-table th {
        background: var(--card);
        font-weight: 600;
        color: var(--text);
      }
      
      .data-table tr:last-child td {
        border-bottom: none;
      }
      
      .data-table tr:hover {
        background: var(--card);
      }
      
      .auth-warning {
        background: rgba(151, 117, 250, 0.1);
        border: 1px solid #9775fa;
        border-radius: 8px;
        padding: 20px;
        text-align: center;
        margin-bottom: 20px;
      }
      
      .auth-warning-icon {
        font-size: 2rem;
        margin-bottom: 10px;
      }
      
      .auth-warning-text {
        color: var(--text);
        font-size: 1rem;
      }
    </style>
    
    <div class="private-report" data-private="true" data-required-roles="admin,analyst">
      <div class="report-header">
        <h1 class="report-title">æ©Ÿå¯†åˆ†æãƒ¬ãƒãƒ¼ãƒˆ</h1>
        <div class="confidential-label">
          <span>ğŸ”’</span>
          <span>CONFIDENTIAL</span>
        </div>
      </div>
      
      <div class="auth-warning">
        <div class="auth-warning-icon">âš ï¸</div>
        <div class="auth-warning-text">
          ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã«ã¯æ©Ÿå¯†æƒ…å ±ãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚æ¨©é™ã®ãªã„ç¬¬ä¸‰è€…ã¨ã®å…±æœ‰ã¯ç¦æ­¢ã•ã‚Œã¦ã„ã¾ã™ã€‚
        </div>
      </div>
      
      <!-- èªè¨¼æ¸ˆã¿ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
      <div id="reportContent" style="display: none;">
        <!-- KPIãƒ¡ãƒˆãƒªã‚¯ã‚¹ -->
        <div class="report-metrics">
          <div class="metric-box">
            <div class="metric-label">æœˆé–“åç›Šï¼ˆMRRï¼‰</div>
            <div class="metric-value">Â¥12.5M</div>
            <div class="metric-change positive">â†‘ 23.5% (å‰æœˆæ¯”)</div>
          </div>
          
          <div class="metric-box">
            <div class="metric-label">ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ãƒ¦ãƒ¼ã‚¶ãƒ¼æ•°</div>
            <div class="metric-value">45,678</div>
            <div class="metric-change positive">â†‘ 15.2% (å‰æœˆæ¯”)</div>
          </div>
          
          <div class="metric-box">
            <div class="metric-label">è§£ç´„ç‡ï¼ˆChurn Rateï¼‰</div>
            <div class="metric-value">2.3%</div>
            <div class="metric-change positive">â†“ 0.5% (å‰æœˆæ¯”)</div>
          </div>
          
          <div class="metric-box">
            <div class="metric-label">é¡§å®¢ç²å¾—ã‚³ã‚¹ãƒˆï¼ˆCACï¼‰</div>
            <div class="metric-value">Â¥8,500</div>
            <div class="metric-change negative">â†‘ 5.2% (å‰æœˆæ¯”)</div>
          </div>
        </div>
        
        <!-- ãƒãƒ£ãƒ¼ãƒˆãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ -->
        <div class="chart-container">
          <div>ğŸ“Š åç›Šæˆé•·ãƒãƒ£ãƒ¼ãƒˆï¼ˆChart.jså®Ÿè£…äºˆå®šï¼‰</div>
        </div>
        
        <!-- ãƒ‡ãƒ¼ã‚¿ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <h3 style="margin: 30px 0 15px; color: var(--text);">é¡§å®¢ã‚»ã‚°ãƒ¡ãƒ³ãƒˆåˆ¥åˆ†æ</h3>
        <table class="data-table">
          <thead>
            <tr>
              <th>ã‚»ã‚°ãƒ¡ãƒ³ãƒˆ</th>
              <th>é¡§å®¢æ•°</th>
              <th>å¹³å‡å˜ä¾¡</th>
              <th>LTV</th>
              <th>æˆé•·ç‡</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td>ã‚¨ãƒ³ã‚¿ãƒ¼ãƒ—ãƒ©ã‚¤ã‚º</td>
              <td>234</td>
              <td>Â¥125,000</td>
              <td>Â¥2,500,000</td>
              <td class="metric-change positive">+35%</td>
            </tr>
            <tr>
              <td>ä¸­å°ä¼æ¥­</td>
              <td>1,256</td>
              <td>Â¥35,000</td>
              <td>Â¥420,000</td>
              <td class="metric-change positive">+22%</td>
            </tr>
            <tr>
              <td>ã‚¹ã‚¿ãƒ¼ãƒˆã‚¢ãƒƒãƒ—</td>
              <td>3,478</td>
              <td>Â¥12,000</td>
              <td>Â¥96,000</td>
              <td class="metric-change positive">+18%</td>
            </tr>
            <tr>
              <td>å€‹äºº</td>
              <td>8,912</td>
              <td>Â¥3,500</td>
              <td>Â¥21,000</td>
              <td class="metric-change negative">-5%</td>
            </tr>
          </tbody>
        </table>
      </div>
      
      <!-- æœªèªè¨¼æ™‚ã®è¡¨ç¤º -->
      <div id="reportLoginRequired" class="login-required" style="display: none;">
        <div class="login-icon">ğŸ”</div>
        <div class="login-message">
          ã“ã®ãƒ¬ãƒãƒ¼ãƒˆã‚’è¡¨ç¤ºã™ã‚‹ã«ã¯ç®¡ç†è€…ã¾ãŸã¯ã‚¢ãƒŠãƒªã‚¹ãƒˆæ¨©é™ãŒå¿…è¦ã§ã™
        </div>
        <button class="login-button" onclick="showLoginModal()">
          ãƒ­ã‚°ã‚¤ãƒ³
        </button>
      </div>
    </div>
    
    <script>
      // èªè¨¼ãƒã‚§ãƒƒã‚¯ï¼ˆå®Ÿè£…ä¾‹ï¼‰
      (function() {
        const reportContent = document.getElementById('reportContent');
        const loginRequired = document.getElementById('reportLoginRequired');
        
        // ç°¡æ˜“çš„ãªæ¨©é™ãƒã‚§ãƒƒã‚¯
        const authToken = localStorage.getItem('auth_token');
        const userRole = localStorage.getItem('user_role') || 'guest';
        const hasAccess = authToken && ['admin', 'analyst'].includes(userRole);
        
        if (hasAccess) {
          reportContent.style.display = 'block';
          loginRequired.style.display = 'none';
        } else {
          reportContent.style.display = 'none';
          loginRequired.style.display = 'block';
        }
      })();
    </script>
